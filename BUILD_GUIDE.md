# ğŸ‰ RK3566 Yoctoæ„å»ºç³»ç»Ÿæ­å»ºæˆåŠŸï¼

## ğŸ“ å½“å‰çŠ¶æ€

âœ… **Yoctoç¯å¢ƒå·²å®Œæˆæ­å»º**  
âœ… **æ‰€æœ‰ä¾èµ–åŒ…å·²å®‰è£…**  
âœ… **RK3566æœºå™¨é…ç½®å·²åˆ›å»º**  
âœ… **æ„å»ºè„šæœ¬å·²å‡†å¤‡å°±ç»ª**

## ğŸš€ å¼€å§‹æ„å»º

æ‚¨ç°åœ¨å¯ä»¥å¼€å§‹æ„å»ºRK3566çš„Linuxé•œåƒäº†ï¼

### æ–¹æ³•1: ä½¿ç”¨ä¾¿æ·è„šæœ¬ (æ¨è)

```bash
# æ„å»ºæœ€å°é•œåƒ (çº¦50MBï¼Œé€‚åˆåµŒå…¥å¼è®¾å¤‡)
./build-image.sh core-image-minimal

# æ„å»ºåŸºç¡€é•œåƒ (çº¦200MBï¼Œæ¨èç”¨äºå¼€å‘)
./build-image.sh core-image-base

# æ„å»ºå®Œæ•´æ¡Œé¢é•œåƒ (çº¦800MBï¼Œå¸¦å›¾å½¢ç•Œé¢)
./build-image.sh core-image-sato
```

### æ–¹æ³•2: æ‰‹åŠ¨æ„å»º

```bash
# 1. è®¾ç½®ç¯å¢ƒ
./setup-env.sh

# 2. æˆ–è€…æ‰‹åŠ¨è®¾ç½®
cd poky
source oe-init-build-env ../build

# 3. å¼€å§‹æ„å»º
bitbake core-image-base
```

## ğŸ“Š æ„å»ºä¿¡æ¯

| é•œåƒç±»å‹ | å¤§å° | æ„å»ºæ—¶é—´ | é€‚ç”¨åœºæ™¯ |
|----------|------|----------|----------|
| `core-image-minimal` | ~50MB | 30-60åˆ†é’Ÿ | åµŒå…¥å¼äº§å“ï¼ŒIoTè®¾å¤‡ |
| `core-image-base` | ~200MB | 1-2å°æ—¶ | **å¼€å‘æµ‹è¯•æ¨è** |
| `core-image-sato` | ~800MB | 2-3å°æ—¶ | æ¡Œé¢åº”ç”¨ï¼Œå¤šåª’ä½“ |

## ğŸ“ è¾“å‡ºæ–‡ä»¶ä½ç½®

æ„å»ºå®Œæˆåï¼Œé•œåƒæ–‡ä»¶å°†ä½äºï¼š
```
yocto-rk3566/build/tmp/deploy/images/rk3566-tspi/
```

ä¸»è¦æ–‡ä»¶ï¼š
- **`*.wic`** - å®Œæ•´SDå¡é•œåƒ (æ¨è)
- **`*.ext4`** - æ ¹æ–‡ä»¶ç³»ç»Ÿé•œåƒ
- **`*.tar.bz2`** - æ ¹æ–‡ä»¶ç³»ç»Ÿå‹ç¼©åŒ…
- **`Image`** - Linuxå†…æ ¸
- **`*.dtb`** - è®¾å¤‡æ ‘æ–‡ä»¶

## ğŸ’¾ çƒ§å†™åˆ°SDå¡

```bash
# æŸ¥çœ‹SDå¡è®¾å¤‡
lsblk

# çƒ§å†™å®Œæ•´é•œåƒ (æ›¿æ¢/dev/sdXä¸ºå®é™…è®¾å¤‡)
sudo dd if=core-image-base-rk3566-tspi.wic of=/dev/sdX bs=1M status=progress

# åŒæ­¥å†™å…¥
sync
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡æ„å»ºè€—æ—¶è¾ƒé•¿** - éœ€è¦ä¸‹è½½å¤§é‡æºä»£ç åŒ…ï¼Œè¯·ä¿æŒç½‘ç»œè¿æ¥ç¨³å®š
2. **ç£ç›˜ç©ºé—´éœ€æ±‚** - å®Œæ•´æ„å»ºéœ€è¦çº¦30-50GBç©ºé—´
3. **æ„å»ºè¿‡ç¨‹** - å¯èƒ½éœ€è¦1-3å°æ—¶ï¼Œè¯·è€å¿ƒç­‰å¾…
4. **ç½‘ç»œè¦æ±‚** - ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼Œé¿å…ä¸‹è½½ä¸­æ–­

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹å¯ç”¨é•œåƒç±»å‹
bitbake -s | grep image

# æ¸…ç†ç‰¹å®šé•œåƒçš„æ„å»º
bitbake -c clean core-image-base

# æŸ¥çœ‹æ„å»ºä»»åŠ¡
bitbake -c listtasks core-image-base

# æ„å»ºSDK
bitbake core-image-base -c populate_sdk

# æŸ¥çœ‹é•œåƒå†…å®¹
bitbake -g core-image-base && cat pn-buildlist | grep -ve "native" | sort | uniq
```

## ğŸ› æ•…éšœæ’é™¤

### ç½‘ç»œé—®é¢˜
å¦‚æœé‡åˆ°ä¸‹è½½å¤±è´¥ï¼š
```bash
# è®¾ç½®ä»£ç† (å¦‚éœ€è¦)
export http_proxy=http://proxy:port
export https_proxy=http://proxy:port

# é‡æ–°å¼€å§‹æ„å»º
bitbake core-image-base
```

### ç£ç›˜ç©ºé—´ä¸è¶³
```bash
# æ¸…ç†ä¸‹è½½ç¼“å­˜
rm -rf downloads/*

# æ¸…ç†çŠ¶æ€ç¼“å­˜
rm -rf sstate-cache/*

# å¯ç”¨è‡ªåŠ¨æ¸…ç† (å·²åœ¨é…ç½®ä¸­å¯ç”¨)
# INHERIT += "rm_work"
```

### æ„å»ºå¤±è´¥
```bash
# æ¸…ç†å¹¶é‡æ–°æ„å»º
bitbake -c clean core-image-base
bitbake core-image-base

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
bitbake -v core-image-base
```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **é€‰æ‹©é•œåƒç±»å‹** - å»ºè®®å…ˆä» `core-image-base` å¼€å§‹
2. **å¼€å§‹æ„å»º** - è¿è¡Œ `./build-image.sh core-image-base`
3. **æµ‹è¯•é•œåƒ** - çƒ§å†™åˆ°SDå¡å¹¶åœ¨RK3566è®¾å¤‡ä¸Šæµ‹è¯•
4. **è‡ªå®šä¹‰é•œåƒ** - æ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶

---

**ğŸš€ ç¥æ‚¨æ„å»ºæˆåŠŸï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥æ„å»ºæ—¥å¿—æˆ–å‚è€ƒYoctoå®˜æ–¹æ–‡æ¡£ã€‚**